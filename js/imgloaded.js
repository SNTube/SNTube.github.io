!function(){class e{constructor(e,t){this.smallSrc=e,this.largeSrc=t,this.initTpl(),this.container.addEventListener("animationend",(()=>{this.smallStage.style.display="none"}),{once:!0})}initTpl(){this.container=document.createElement("div"),this.smallStage=document.createElement("div"),this.largeStage=document.createElement("div"),this.video=document.createElement("div"),this.smallImg=new Image,this.largeImg=new Image,this.container.className="pl-container",this.smallStage.className="pl-img pl-blur",this.largeStage.className="pl-img",this.video.className="pl-video",this.container.appendChild(this.smallStage),this.container.appendChild(this.largeStage),this.container.appendChild(this.video);const e=document.createElement("div");e.id="bgclockbg";const t=document.createElement("div");t.id="bgclock";const a=document.createElement("p");a.classList.add("bgdate"),a.textContent="1698439010014";const n=document.createElement("p");n.classList.add("bgtime"),n.textContent="",t.appendChild(a),t.appendChild(n),e.appendChild(t),this.container.appendChild(e),this.smallImg.onload=this._onSmallLoaded.bind(this),this.largeImg.onload=this._onLargeLoaded.bind(this)}progressiveLoad(){this.smallImg.src=this.smallSrc,this.largeImg.src=this.largeSrc}_onLargeLoaded(){this.largeStage.classList.add("pl-visible"),this.largeStage.style.backgroundImage=`url('${this.largeSrc}')`}_onSmallLoaded(){this.smallStage.classList.add("pl-visible"),this.smallStage.style.backgroundImage=`url('${this.smallSrc}')`}}const t=(t,a)=>{console.log("执行渐进背景替换");const n=window.matchMedia("(max-width: 767px)").matches,s=new e(n?t.mobileSmallSrc:t.smallSrc,n?t.mobileLargeSrc:t.largeSrc);a.children[0]&&a.insertBefore(s.container,a.children[0]),s.progressiveLoad()},a={light:{smallSrc:"",largeSrc:"https://bu.dusays.com/2023/09/20/650ab6c396874.png",mobileSmallSrc:"",mobileLargeSrc:"https://bu.dusays.com/2023/09/20/650ab6c396874.png",enableRoutes:["/"]},dark:{smallSrc:"https://bu.dusays.com/2023/10/28/653c1f1529842.jpg",largeSrc:"https://bu.dusays.com/2023/10/24/65378c62b28fc.png",mobileSmallSrc:"https://bu.dusays.com/2023/10/28/653c1f1529842.jpg",mobileLargeSrc:"https://bu.dusays.com/2023/10/24/65378c62b28fc.png",enableRoutes:["/"]}},n=()=>document.documentElement.getAttribute("data-theme"),s=()=>{const e=n(),t=a[e];i(t),updatebgTime(),document.addEventListener("DOMContentLoaded",(function(){i(t)})),document.addEventListener("pjax:complete",(function(){!function(e){const t=document.getElementById("page-header");t&&t.classList.contains("full_page")&&i(e)}(t)}))};let l=n();i(a[l]);function i(e){const a=document.querySelector(".pl-container");a&&a.remove();const n=document.getElementById("page-header");n&&n.classList.contains("full_page")&&t(e,n)}new MutationObserver((e=>{e.forEach((e=>{"data-theme"===e.attributeName&&"/"===location.pathname&&s()}))})).observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]})}();var bgtimerID=setInterval(updatebgTime,1e3);function updatebgTime(){var e=document.getElementById("bgclock");if(null!==e){var t=new Date,a=s(t.getHours(),2)+":"+s(t.getMinutes(),2)+":"+s(t.getSeconds(),2),n=s(t.getFullYear(),4)+"-"+s(t.getMonth()+1,2)+"-"+s(t.getDate(),2)+" "+["SUN","MON","TUE","WED","THU","FRI","SAT"][t.getDay()];e.innerHTML=`\n    <p class="bgdate">${n}</p>\n    <p class="bgtime">${a}</p>\n  `}function s(e,t){for(var a="",n=0;n<t;n++)a+="0";return(a+e).slice(-t)}}updatebgTime();